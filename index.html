<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Etiketten Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="brand-text">
        <h1>Etiketten Generator<span class="version-badge">v0.33</span></h1>
        <p class="subtitle">Vul de gegevens in en krijg vier etiketten op maat (front/back + 2× zijkant).</p>
      </div>
      <div class="logo-mark">RD</div>
    </header>

    <div class="main-grid">
      <!-- LINKERKANT: FORMULIER -->
      <section class="card">
        <h2>Doos &amp; productgegevens</h2>
        <small>Alle velden zijn verplicht.</small>

        <form id="labelForm" class="form-grid" onsubmit="return false;">
          <fieldset class="fields-columns">
            <legend>Doosafmetingen (cm)</legend>

            <div class="field-row">
              <label for="boxLength">Lengte (L)</label>
              <input id="boxLength" type="number" min="5" max="100" step="0.1" required />
            </div>
            <div class="field-row">
              <label for="boxWidth">Breedte (W)</label>
              <input id="boxWidth" type="number" min="5" max="100" step="0.1" required />
            </div>
            <div class="field-row">
              <label for="boxHeight">Hoogte (H)</label>
              <input id="boxHeight" type="number" min="5" max="100" step="0.1" required />
            </div>
          </fieldset>

          <fieldset class="fields-columns">
            <legend>Productgegevens</legend>

            <div class="field-row">
              <label for="prodCode">Productcode (ERP)</label>
              <input id="prodCode" type="text" required />
            </div>
            <div class="field-row">
              <label for="prodDesc">Productnaam</label>
              <input id="prodDesc" type="text" required />
            </div>
            <div class="field-row">
              <label for="ean">EAN</label>
              <input id="ean" type="text" required />
            </div>
            <div class="field-row">
              <label for="qty">QTY (PCS)</label>
              <input id="qty" type="number" min="0" step="1" required />
            </div>
            <div class="field-row">
              <label for="gw">G.W (KGS)</label>
              <input id="gw" type="number" step="0.01" required />
            </div>
            <div class="field-row">
              <label for="cbm">CBM</label>
              <input id="cbm" type="text" required />
            </div>
            <div class="field-row">
              <label for="batch">Batch</label>
              <input id="batch" type="text" required />
            </div>
          </fieldset>

          <div class="actions">
            <button id="btnGen" type="button" class="primary">Voorbeeld tonen</button>
            <button id="btnPDF" type="button" class="secondary">1 PDF genereren</button>
          </div>
        </form>
      </section>

      <!-- RECHTERKANT: PREVIEW -->
      <section class="card">
        <div class="canvas" id="canvas">
          <div id="controlInfo" class="control-card">
            <h3>Berekende labelafmetingen</h3>
            <p class="control-item">Nog geen gegevens ingevuld.</p>
          </div>
          <div class="labels-grid" id="labelsGrid"></div>
        </div>
      </section>
    </div>

    <!-- BATCH-SECTIE -->
    <section class="card" style="margin-top:18px;">
      <div class="batch-panel">
        <h2>Batchmodus (CSV / XLSX)</h2>
        <p>Upload een bestand om meerdere etiketten in één keer als ZIP met PDF’s te genereren.</p>

        <div class="upload-row">
          <button type="button" id="btnPickFile" class="primary">Bestand kiezen</button>
          <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" style="display:none;" />
          <div class="dropzone" id="dropzone">Sleep hier een CSV of XLSX naartoe…</div>
        </div>

        <div class="actions" style="justify-content:flex-start;">
          <button type="button" id="btnTemplateCsv" class="secondary">Template CSV</button>
          <button type="button" id="btnTemplateXlsx" class="secondary">Template XLSX</button>
        </div>

        <div id="mappingWrap" class="hidden">
          <h3>Kolommen koppelen</h3>
          <div id="mappingGrid" class="map-grid"></div>
        </div>

        <div id="previewWrap" class="hidden">
          <h3>Voorbeeld van data</h3>
          <div id="tablePreview" class="table-preview"></div>
        </div>

        <div id="normWrap" class="hidden">
          <label>
            <input type="checkbox" id="optCommaDecimal" />
            Gebruik komma als decimaalteken
          </label>
          <label>
            <input type="checkbox" id="optTrimSpaces" />
            Spaties rondom waarden weghalen
          </label>
        </div>

        <div id="batchControls" class="hidden" style="margin-top:10px;">
          <button type="button" id="btnRunBatch" class="primary">Batch starten</button>
          <button type="button" id="btnAbortBatch" class="secondary" disabled>Batch afbreken</button>
        </div>

        <div id="progressWrap" class="progress-wrap hidden">
          <div id="progressPhase">Nog niet gestart…</div>
          <div class="progress-bar-outer">
            <div id="progressBar" class="progress-bar-inner"></div>
          </div>
          <div id="progressLabel">0 / 0</div>
        </div>

        <div id="logWrap" class="hidden">
          <div id="logList" class="log-list"></div>
        </div>
      </div>
    </section>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
